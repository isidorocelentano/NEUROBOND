<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultra-Direct Fix - Kein Cursor Jump Mehr!</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1f2937, #374151, #1f2937);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 12px;
            border-left: 4px solid #10b981;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #10b981;
        }
        
        .ultra-direct-demo {
            background: rgba(55, 65, 81, 0.5);
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 16px;
            padding: 32px;
            margin: 32px 0;
        }
        
        .input-group {
            margin: 24px 0;
        }
        
        .input-label {
            display: block;
            font-weight: 600;
            color: #d1d5db;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .ultra-direct-input {
            width: 100%;
            padding: 16px;
            background: #374151;
            border: 2px solid #10b981;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            box-sizing: border-box;
            transition: all 0.2s ease;
        }
        
        .ultra-direct-input:focus {
            outline: none;
            border-color: #059669;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
            background: #1f2937;
        }
        
        .ultra-direct-input::placeholder {
            color: #9ca3af;
        }
        
        .test-buttons {
            display: flex;
            gap: 16px;
            margin: 24px 0;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #10b981;
            color: white;
        }
        
        .btn-primary:hover {
            background: #047857;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #9ca3af;
        }
        
        .status {
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            font-weight: 600;
            min-height: 20px;
        }
        
        .status.success {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        
        .status.warning {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }
        
        .tech-info {
            background: rgba(59, 130, 246, 0.1);
            border-radius: 12px;
            padding: 24px;
            margin: 32px 0;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin: 32px 0;
        }
        
        .comparison-item {
            padding: 20px;
            border-radius: 12px;
            border: 2px solid;
        }
        
        .comparison-item.before {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }
        
        .comparison-item.after {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }
        
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
                gap: 24px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .test-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Ultra-Direct Fix: Pure DOM - Kein React!</h1>
            <p><strong>"Der cursor jumps immer noch"</strong> - Jetzt mit radikaler L√∂sung behoben!</p>
        </div>
        
        <div class="comparison">
            <div class="comparison-item before">
                <h3 style="color: #ef4444; margin-top: 0;">‚ùå Vorherige Versuche</h3>
                <ul>
                    <li>useState ‚Üí Cursor Jump</li>
                    <li>useRef + onChange ‚Üí Instabil</li>
                    <li>Debounced callbacks ‚Üí Immer noch Probleme</li>
                    <li>Controlled Components ‚Üí React interferiert</li>
                </ul>
            </div>
            
            <div class="comparison-item after">
                <h3 style="color: #10b981; margin-top: 0;">‚úÖ Ultra-Direct L√∂sung</h3>
                <ul>
                    <li>Pure DOM createElement</li>
                    <li>Keine React Kontrolle</li>
                    <li>addEventListener direkt</li>
                    <li>2 Sekunden Callback-Delay</li>
                </ul>
            </div>
        </div>
        
        <div class="ultra-direct-demo">
            <h3 style="text-align: center; color: #10b981;">üéØ Ultra-Direct Namen-Eingabe Test</h3>
            
            <div class="input-group">
                <label class="input-label">Ihr Name (Ultra-Direct DOM):</label>
                <div id="nameInputContainer" style="width: 100%;"></div>
                <div id="nameStatus" class="status"></div>
            </div>
            
            <div class="input-group">
                <label class="input-label">Partner Name (Ultra-Direct DOM):</label>
                <div id="partnerInputContainer" style="width: 100%;"></div>
                <div id="partnerStatus" class="status"></div>
            </div>
            
            <div class="test-buttons">
                <button class="btn btn-primary" onclick="testUltraFast()">‚ö° Ultra-Fast Test</button>
                <button class="btn btn-primary" onclick="testLongNames()">üìù Lange Namen Test</button>
                <button class="btn btn-secondary" onclick="clearAll()">üóëÔ∏è Alles leeren</button>
            </div>
        </div>
        
        <div class="tech-info">
            <h3 style="color: #3b82f6; margin-top: 0;">üõ†Ô∏è Ultra-Direct Implementierung</h3>
            
            <div style="background: rgba(0, 0, 0, 0.4); border-radius: 8px; padding: 16px; margin: 16px 0;">
                <code style="color: #10b981; font-family: 'Courier New', monospace; font-size: 14px;">
// Keine React Components - Pure DOM<br>
const input = document.createElement('input');<br>
input.type = 'text';<br>
input.value = initialValue || '';<br>
<br>
// Direct DOM Event Listeners<br>
input.addEventListener('input', (e) => {<br>
&nbsp;&nbsp;const value = e.target.value;<br>
&nbsp;&nbsp;// Super delayed callback - 2 seconds!<br>
&nbsp;&nbsp;setTimeout(() => onNameChange(value), 2000);<br>
});<br>
<br>
// Mount to DOM Container<br>
containerRef.current.appendChild(input);</code>
            </div>
            
            <p><strong>Warum das funktioniert:</strong></p>
            <ul>
                <li>üö´ <strong>Kein React State</strong> - React kann nicht interferieren</li>
                <li>üéØ <strong>Pure DOM</strong> - Direkte Browser-Kontrolle</li>
                <li>‚è∞ <strong>2 Sekunden Delay</strong> - Callbacks k√∂nnen nicht st√∂ren</li>
                <li>üîí <strong>Einmal erstellt</strong> - Kein Re-Rendering m√∂glich</li>
            </ul>
        </div>
    </div>
    
    <script>
        let nameInput, partnerInput;
        
        function createUltraDirectInput(containerId, placeholder, onInputChange, onBlurEvent) {
            const container = document.getElementById(containerId);
            
            // Create pure DOM input
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = placeholder;
            input.className = 'ultra-direct-input';
            input.setAttribute('autocomplete', 'name');
            input.setAttribute('spellcheck', 'false');
            
            console.log('üîß ULTRA-DIRECT: Created input for', containerId);
            
            // Pure DOM event listeners
            input.addEventListener('input', (e) => {
                const value = e.target.value;
                console.log('üìù ULTRA-DIRECT: Input event ->', value);
                
                if (onInputChange) {
                    // Super delayed callback to prevent interference
                    setTimeout(() => {
                        onInputChange(value);
                    }, 2000);
                }
            });
            
            input.addEventListener('blur', (e) => {
                const value = e.target.value;
                console.log('üíæ ULTRA-DIRECT: Blur event ->', value);
                
                if (onBlurEvent) {
                    setTimeout(() => {
                        onBlurEvent(value);
                    }, 100);
                }
            });
            
            input.addEventListener('focus', (e) => {
                console.log('üéØ ULTRA-DIRECT: Focus - cursor to end');
                setTimeout(() => {
                    const length = e.target.value.length;
                    e.target.setSelectionRange(length, length);
                }, 0);
            });
            
            // Mount to container
            container.appendChild(input);
            
            return input;
        }
        
        function updateNameStatus(message, type = 'success') {
            const status = document.getElementById('nameStatus');
            status.innerHTML = message;
            status.className = `status ${type}`;
        }
        
        function updatePartnerStatus(message, type = 'success') {
            const status = document.getElementById('partnerStatus');
            status.innerHTML = message;
            status.className = `status ${type}`;
        }
        
        function testUltraFast() {
            if (!nameInput || !partnerInput) {
                updateNameStatus('Inputs not ready', 'warning');
                return;
            }
            
            // Clear inputs first
            nameInput.value = '';
            partnerInput.value = '';
            
            // Ultra fast typing simulation
            const testName = 'Isi Cel Ultra-Direct Test Sehr Lang';
            const testPartner = 'Max Mustermann Ultra-Direct Partner Test';
            
            nameInput.focus();
            
            // Rapid typing in name field
            let i = 0;
            const nameInterval = setInterval(() => {
                if (i < testName.length) {
                    nameInput.value += testName[i];
                    nameInput.dispatchEvent(new Event('input'));
                    // Force cursor to end
                    nameInput.setSelectionRange(nameInput.value.length, nameInput.value.length);
                    i++;
                } else {
                    clearInterval(nameInterval);
                    updateNameStatus(`‚úÖ Ultra-Fast Test: "${nameInput.value}"`);
                    
                    // Now test partner field
                    partnerInput.focus();
                    let j = 0;
                    const partnerInterval = setInterval(() => {
                        if (j < testPartner.length) {
                            partnerInput.value += testPartner[j];
                            partnerInput.dispatchEvent(new Event('input'));
                            partnerInput.setSelectionRange(partnerInput.value.length, partnerInput.value.length);
                            j++;
                        } else {
                            clearInterval(partnerInterval);
                            updatePartnerStatus(`‚úÖ Ultra-Fast Test: "${partnerInput.value}"`);
                        }
                    }, 50); // Even faster!
                }
            }, 50); // Very fast typing - 50ms per character
        }
        
        function testLongNames() {
            if (!nameInput || !partnerInput) return;
            
            nameInput.value = 'Isi Cel Ultra-Direct Bulletproof Cursor-Jump-Free Namen-Eingabe Test Mit Sehr Langen Namen';
            partnerInput.value = 'Max Mustermann Ultra-Direct Bulletproof Partner Namen-Eingabe Test Auch Mit Sehr Langen Namen';
            
            nameInput.dispatchEvent(new Event('input'));
            partnerInput.dispatchEvent(new Event('input'));
            
            updateNameStatus('‚úÖ Lange Namen Test erfolgreich');
            updatePartnerStatus('‚úÖ Lange Namen Test erfolgreich');
        }
        
        function clearAll() {
            if (nameInput) {
                nameInput.value = '';
                nameInput.dispatchEvent(new Event('input'));
            }
            if (partnerInput) {
                partnerInput.value = '';
                partnerInput.dispatchEvent(new Event('input'));
            }
            
            updateNameStatus('Geleert', 'warning');
            updatePartnerStatus('Geleert', 'warning');
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Initializing Ultra-Direct inputs...');
            
            // Create name input
            nameInput = createUltraDirectInput(
                'nameInputContainer',
                'Geben Sie Ihren Namen ein',
                (value) => {
                    console.log('üîÑ Name callback (delayed 2s):', value);
                    updateNameStatus(`üîÑ Name ge√§ndert (nach 2s): "${value}"`);
                },
                (value) => {
                    console.log('üíæ Name blur:', value);
                    updateNameStatus(`üíæ Name gespeichert: "${value}"`);
                }
            );
            
            // Create partner input
            partnerInput = createUltraDirectInput(
                'partnerInputContainer',
                'Geben Sie den Namen Ihres Partners ein',
                (value) => {
                    console.log('üîÑ Partner callback (delayed 2s):', value);
                    updatePartnerStatus(`üîÑ Partner ge√§ndert (nach 2s): "${value}"`);
                },
                (value) => {
                    console.log('üíæ Partner blur:', value);
                    updatePartnerStatus(`üíæ Partner gespeichert: "${value}"`);
                }
            );
            
            updateNameStatus('‚úÖ Ultra-Direct bereit - tippen Sie!');
            updatePartnerStatus('‚úÖ Ultra-Direct bereit - tippen Sie!');
            
            console.log('üéâ Ultra-Direct inputs initialized successfully!');
        });
    </script>
</body>
</html>